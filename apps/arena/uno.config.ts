import { createLocalFontProcessor } from '@unocss/preset-web-fonts/local'
import {
  presetAttributify,
  presetIcons,
  presetTypography,
  presetWebFonts,
  presetWind4,
  transformerDirectives,
  transformerVariantGroup,
} from 'unocss'
import presetShadcn from './preset.shadcn'

type ThemeColorString = `${number} ${number}% ${number}%`
export const themeCSSVarKeys = [
  'background',
  'foreground',
  'card',
  'card-foreground',
  'popover',
  'popover-foreground',
  'primary',
  'primary-to',
  'primary-foreground',
  'secondary',
  'secondary-foreground',
  'muted',
  'muted-foreground',
  'accent',
  'accent-foreground',
  'destructive',
  'destructive-foreground',
  'border',
  'input',
  'ring',
  'chart-1',
  'chart-2',
  'chart-3',
  'chart-4',
  'chart-5',
  'sidebar',
  'sidebar-foreground',
  'sidebar-primary',
  'sidebar-primary-foreground',
  'sidebar-accent',
  'sidebar-accent-foreground',
  'sidebar-border',
  'sidebar-ring',
] as const
export type ThemeCSSVarKey = (typeof themeCSSVarKeys)[number]

export type ThemeCSSVars = Record<ThemeCSSVarKey, ThemeColorString>

export default {
  shortcuts: [
    ['btn', 'px-4 py-1 rounded inline-block bg-teal-600 text-white cursor-pointer hover:bg-teal-700 disabled:cursor-default disabled:bg-gray-600 disabled:opacity-50'],
    ['icon-btn', 'inline-block cursor-pointer select-none opacity-75 transition duration-200 ease-in-out hover:opacity-100 hover:text-teal-600'],
  ],
  presets: [
    presetWind4({
      preflights: {
        reset: true,
        theme: true,
      },
    }),
    presetAttributify(),
    // presetAnimations(),
    presetShadcn(),
    // presetShadcn(
    //   {
    //     color: {
    //       name: 'exp04',
    //       base: 'zinc',
    //       // light: {
    //       //   'background': '.183 .006 285.79',
    //       //   'foreground': '.985 0 0',
    //       //   'card': '.37 .013 285.805',
    //       //   'card-foreground': '.985 0 0',
    //       //   'popover': '.274 .006 286.033',
    //       //   'popover-foreground': '.985 0 0',
    //       //   'primary': '.585 .233 277.117',
    //       //   'primary-to': '.511 .262 276.966',
    //       //   'primary-foreground': '.962 .018 272.314',
    //       //   'secondary': '.274 .006 286.033',
    //       //   'secondary-foreground': '.985 0 0',
    //       //   'muted': '.21 .006 285.885',
    //       //   'muted-foreground': '.705 .015 286.067',
    //       //   'accent': '.21 .006 285.885',
    //       //   'accent-foreground': '.985 0 0',
    //       //   'destructive': '.637 .237 25.331',
    //       //   'destructive-foreground': '.637 .237 25.331',
    //       //   'border': '.246 .009 285.69',
    //       //   'input': '.246 .009 285.69',
    //       //   'ring': '.442 .017 285.786',
    //       //   'chart-1': '.585 .233 277.117',
    //       //   'chart-2': '.6 .118 184.704',
    //       //   'chart-3': '.398 .07 227.392',
    //       //   'chart-4': '.828 .189 84.429',
    //       //   'chart-5': '.769 .188 70.08',
    //       //   'sidebar': '.21 .006 285.885',
    //       //   'sidebar-foreground': '.967 .001 286.375',
    //       //   'sidebar-primary': '.673 .182 276.935',
    //       //   'sidebar-primary-foreground': '1 0 0',
    //       //   'sidebar-accent': '.274 .006 286.033',
    //       //   'sidebar-accent-foreground': '.967 .001 286.375',
    //       //   'sidebar-border': '.274 .006 286.033',
    //       //   'sidebar-ring': '.442 .017 285.786',
    //       // },
    //       dark: {
    //         'background': '.183 .006 285.79',
    //         'foreground': '.985 0 0',
    //         'card': '.37 .013 285.805',
    //         'card-foreground': '.985 0 0',
    //         'popover': '.274 .006 286.033',
    //         'popover-foreground': '.985 0 0',
    //         'primary': '.585 .233 277.117',
    //         'primary-foreground': '.962 .018 272.314',
    //         'secondary': '.274 .006 286.033',
    //         'secondary-foreground': '.985 0 0',
    //         'muted': '.21 .006 285.885',
    //         'muted-foreground': '.705 .015 286.067',
    //         'accent': '.21 .006 285.885',
    //         'accent-foreground': '.985 0 0',
    //         'destructive': '.637 .237 25.331',
    //         'destructive-foreground': '.637 .237 25.331',
    //         'border': '.246 .009 285.69',
    //         'input': '.246 .009 285.69',
    //         'ring': '.442 .017 285.786',
    //         'chart-1': '.585 .233 277.117',
    //         'chart-2': '.6 .118 184.704',
    //         'chart-3': '.398 .07 227.392',
    //         'chart-4': '.828 .189 84.429',
    //         'chart-5': '.769 .188 70.08',
    //         'sidebar': '.21 .006 285.885',
    //         'sidebar-foreground': '.967 .001 286.375',
    //         'sidebar-primary': '.673 .182 276.935',
    //         'sidebar-primary-foreground': '1 0 0',
    //         'sidebar-accent': '.274 .006 286.033',
    //         'sidebar-accent-foreground': '.967 .001 286.375',
    //         'sidebar-border': '.274 .006 286.033',
    //         'sidebar-ring': '.442 .017 285.786'
    //       } as unknown as ThemeCSSVars,
    //     } as const,
    //   },

    //   // With default setting for SolidUI, you need to set the darkSelector option.
    //   {
    //     // If you are using reka ui.
    //     componentLibrary: 'reka',
    //   },
    // ),
    presetIcons({
      scale: 1.2,
    }),
    presetTypography(),
    presetWebFonts({
      fonts: {
        sans: 'Inter',
        serif: 'DM Serif Display',
        mono: 'DM Mono',
      },
      processors: createLocalFontProcessor(),
    }),
  ],
  transformers: [
    transformerDirectives(),
    transformerVariantGroup(),
  ],
}
